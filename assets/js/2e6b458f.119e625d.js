"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[170],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>p});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(t),p=o,f=m["".concat(s,".").concat(p)]||m[p]||d[p]||a;return t?r.createElement(f,l(l({ref:n},c),{},{components:t})):r.createElement(f,l({ref:n},c))}));function p(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var u=2;u<a;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},59693:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var r=t(87462),o=(t(67294),t(3905));const a={sidebar_position:3},l="Common Patterns",i={unversionedId:"Common Patterns",id:"Common Patterns",title:"Common Patterns",description:"As Stew's usage grows, patterns to achieve common tasks make themselves apparent and will find themselves here. These are by no means strict guidelines on how to use Stew.",source:"@site/docs/Common Patterns.md",sourceDirName:".",slug:"/Common Patterns",permalink:"/Stew/docs/Common Patterns",draft:!1,editUrl:"https://github.com/solarscuffle-bot/stew/edit/main/docs/Common Patterns.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Lexicon",permalink:"/Stew/docs/Lexicon"}},s={},u=[{value:"Deferred Execution",id:"deferred-execution",level:2},{value:"Modularity + Event Decoupling",id:"modularity--event-decoupling",level:2}],c={toc:u};function d(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"common-patterns"},"Common Patterns"),(0,o.kt)("p",null,"As Stew's usage grows, patterns to achieve common tasks make themselves apparent and will find themselves here. These are by no means strict guidelines on how to use Stew."),(0,o.kt)("h2",{id:"deferred-execution"},"Deferred Execution"),(0,o.kt)("p",null,"Sometimes you may find yourself needing to execute code ",(0,o.kt)("em",{parentName:"p"},"after")," the constructor or other callback fires. To do this, and to not do more than you have to, you can use ",(0,o.kt)("inlineCode",{parentName:"p"},"task.defer")," to execute code the frame after it was called."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local World = Stew.World.Create()\n\nWorld.Component.Build("MyComponent", {\n    Constructor = function(Entity, Name)\n        print("Before")\n\n        task.defer(function()\n            print("After")\n        end)\n\n        return true\n    end;\n})\n')),(0,o.kt)("h2",{id:"modularity--event-decoupling"},"Modularity + Event Decoupling"),(0,o.kt)("p",null,"More often than not you will want to separate code execution from where it is being called, so you do not couple unrelated or modular code. Stew provides component-level and world-level ways to achieve this, both along the same lines and very simple. Since arbitrary code can be executed whenever a component is constructed, events of your choice can be fired."),(0,o.kt)("p",null,"This also ties well into using Module Scripts when defining Worlds or Components, since you can easily define extra data alongside everything else and encourage more flexible data accessing. It pairs well with the idea of registries, modules of purely constant data."),(0,o.kt)("p",null,"This particular example uses Sleitnick's Signal implementation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local Module = {}\n\nModule.Signals = {\n    Built = Signal.new();\n    Created = Signal.new();\n}\n\nModule.World = Stew.World.Create {\n    Component = {\n        Build = function(Name, ComponentData)\n            Module.Signals.Built:Fire(Name, ComponentData.Signature)\n        end;\n\n        Create = function(Entity, Name, Component)\n            Module.Signal.Created:Fire(Entity, Name, Component)\n        end;\n    };\n}\n\nreturn Module\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local World = require(Path.To.Module).World\n\nlocal Module = {}\n\nModule.Signals = {\n    Created = Signal.new();\n    Deleted = Signal.new();\n}\n\nWorld.Component.Build("MyComponent", {\n    Constructor = function(Entity : Player, Name : string, Arg1 : number, Arg2 : number) : number\n        local Component = Arg1 + Arg2\n\n        task.defer(function()\n            Module.Signals.Created:Fire(Entity, Name, Component)\n        end)\n\n        return Component\n    end;\n\n    Destructor = function(Entity : Player, Name : string)\n        Module.Signals.Deleted:Fire(Entity, Name)\n    end;\n})\n\nreturn Module\n')))}d.isMDXComponent=!0}}]);